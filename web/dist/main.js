(()=>{var t={978:(t,e,s)=>{t.exports=s(411)},781:(t,e,s)=>{const a=s(923);class i{static toObject(t){var e,s,r;return"Object"==t.constructor.name?t:t instanceof FormData?a.formDataToObject(t):t instanceof HTMLFormElement?(e=new FormData(t),a.formDataToObject(e)):t instanceof URL?a.queryStringToObject(t.search):t instanceof URLSearchParams?a.searchParamsToObject(t):a.isValidJson(t)?JSON.parse(t):(r=(s=a.stringToUrl(t))&&s.search?new URLSearchParams(s.search):new URLSearchParams(t),i.emptySearchParams(r)?null:a.searchParamsToObject(r))}static toJson(t){var e;return a.isValidJson(t)?t:(e=i.toObject(t),JSON.stringify(e))}static toFormData(t){var e;return t instanceof FormData?t:t instanceof HTMLFormElement?new FormData(t):(e=i.toObject(t),a.objectToFormData(e))}static emptySearchParams(t){for(var e of t.values())if(e)return!1;return!0}}t.exports=i},923:(t,e,s)=>{const a=s(26),i=s(15);class r{static stringToUrl(t){if(i.isAbsolute(t))return new URL(t);var e;const s="/"==t.slice(0,1),r=i.getBaseHref();return s?((e=new URL(r)).pathname=t,e.placeholder=e.toString().replace(t,"")):(e=new URL(r+a.ltrim(t,"/"))).placeholder=r,e}static urlToString(t){var e=t.toString();return t.placeholder&&(e=e.replace(t.placeholder,"")),e}static searchParamsToObject(t){var e={};for(var[s,i]of t.entries()){var n=-1==s.indexOf("[")?[s]:a.rtrim(s,"]").split(/\]?\[/);r.addPropertyToObject(e,n,i)}return e}static addPropertyToObject(t,e,s){var a=e.pop();for(var i of e)void 0===t[i]&&(t[i]=isNaN(i)?{}:[]),t=t[i];t[a]=s}static objectToSearchParams(t){var e=new URLSearchParams;for(var s in t)r.addToSearchparam(e,s,t[s]);return e}static addToSearchparam(t,e,s){if(Array.isArray(s)||"object"==typeof s)for(var a in s)r.addToSearchparam(t,e+"["+a+"]",s[a]);else t.set(e,s)}static objectToFormData(t){var e=new FormData;for(var s in t)r.addToSearchparam(e,s,t[s]);return e}static formDataToObject(t){return r.searchParamsToObject(t)}static objectToQueryString(t){return r.objectToSearchParams(t).toString()}static queryStringToObject(t){var e=new URLSearchParams(t);return r.searchParamsToObject(e)}static isValidJson(t){if("string"!=typeof t)return!1;try{JSON.parse(t)}catch(t){return!1}return!0}}t.exports=r},26:t=>{class e{static ltrim(t,e=null){e=e||"[ \t\n\r\0\v]";var s=new RegExp("^"+e+"+");return t.replace(s,"")}static rtrim(t,e=null){e=e||"[ \t\n\r\0\v]";var s=new RegExp(e+"+$");return t.replace(s,"")}static trim(t,s=" "){return t=e.ltrim(t,s),e.rtrim(t,s)}}t.exports=e},15:(t,e,s)=>{const a=s(26);class i{static getBaseHref(){return i.getDocumentBaseHref()??i.getWindowLocationBaseHref()}static getWindowLocationBaseHref(){const t=window.location;var e;return e="/"==t.pathname.slice(-1)?t.protocol+"//"+t.host+t.pathname:t.pathname.match(/\.[\w]{2,4}$/)?t.protocol+"//"+t.host+t.pathname.replace(/\/[^\/]+$/,""):t.protocol+"//"+t.host+t.pathname,a.rtrim(e,"/")+"/"}static getDocumentBaseHref(){const t=document.querySelector("base");if(!t)return null;const e=t.getAttribute("href");return e?a.rtrim(e,"/")+"/":null}static isAbsolute(t){return t instanceof URL||"http"==t.substr(0,4)}static isRelative(t){return!i.isAbsolute(t)}}t.exports=i},411:(t,e,s)=>{const a=s(923),i=s(781),r=s(15),n=s(26);class l{defaultOptions={};constructor(t={}){null!=t.baseHref&&(t.baseHref=n.rtrim(t.baseHref,"/")+"/"),this.defaultOptions=t}async fetch(t,e={}){return e.method||(e.method="get"),this.request(t,e)}async get(t,e={}){return e.method="get",this.request(t,e)}async post(t,e={}){return e.method="post",this.request(t,e)}async put(t,e={}){return e.method="put",this.request(t,e)}async delete(t,e={}){return e.method="delete",this.request(t,e)}async options(t,e={}){return e.method="options",this.request(t,e)}async patch(t,e={}){return e.method="patch",this.request(t,e)}static createRequest(t,e){return"string"==typeof t&&(t=r.isRelative(t)?new URL(t,e.baseHref||r.getBaseHref()):new URL(t)),null==e.headers&&(e.headers={}),e.queryParams&&(t=l.addToQueryString(t,e.queryParams),e.queryParams=void 0),"get"==e.method&&e.body?(t=l.addToQueryString(t,e.body),e.body=void 0):e.body&&(e.body="application/json"==l.getHeader(e.headers,"Content-Type")?i.toJson(e.body):i.toFormData(e.body)),l.clearUpOptions(e),new Request(t,e)}static clearUpOptions(t){for(var e in t)void 0===t[e]&&delete t[e];if(t.headers)for(var s in t.headers)void 0===t.headers[s]&&delete t.headers[s]}async request(t,e={}){e={...this.defaultOptions,...e};var s=l.createRequest(t,e);return fetch(s)}static addToQueryString(t,e){var s;e=i.toObject(e);var r=t instanceof URL;for(var n in s=(t=r?t:a.stringToUrl(t)).search?new URLSearchParams(t.search):new URLSearchParams,e)a.addToSearchparam(s,n,e[n]);return t.search=s.toString(),r?t:a.urlToString(t)}static getHeader(t,e){e=e.toLowerCase();for(let s in t)if(s.toLocaleLowerCase()==e)return t[s];return null}}t.exports=l},766:t=>{t.exports=class{static isA(t,e){for(var s=t.__proto__;s;){if("string"==typeof e&&s.name==e)return!0;if("function"==typeof e&&s.name==e.name)return!0;s=s.__proto__}return!1}}}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=class{constructor(t){this.httpClient=t}async apiCall(t,e,s=void 0,a=void 0,i=void 0){return new Promise(((r,n)=>{this.request(t,e,s,a,i).then((t=>t.json().then((e=>{t.status<400?r(e):n(e)}))))}))}request(t,e,s=void 0,a=void 0,i=void 0){var r,n={body:s,queryParams:a};switch(i&&(n={...n,...i}),t){case"post":r=this.httpClient.post(e,n);break;case"put":r=this.httpClient.put(e,n);break;case"delete":r=this.httpClient.delete(e,n);break;case"get":r=this.httpClient.get(e,n)}return r}},e=class extends t{list(){return this.apiCall("get","/api/v1/collection/artists")}},a=class extends t{constructor(t,e){super(t),this.playlistId=e}read(){return this.apiCall("get","/api/v1/collection/playlists/"+this.playlistId)}getItems(t=null){return this.apiCall("get","/api/v1/collection/playlists/"+this.playlistId+"/items",null,t)}update(t){return this.apiCall("put","/api/v1/collection/playlists/"+this.playlistId,t,null,{headers:{"Content-Type":void 0}})}delete(){return this.apiCall("delete","/api/v1/collection/playlists/"+this.playlistId)}},i=class extends t{list(){return this.apiCall("get","/api/v1/collection/playlists")}create(t){return this.apiCall("post","/api/v1/collection/playlists",t,null,{headers:{"Content-Type":void 0}})}get(t){return new a(this.httpClient,t)}},r=class extends t{constructor(t,e){super(t),this.uuid=e}read(){return this.apiCall("get","/api/v1/collection/items/"+this.uuid)}update(t){return this.apiCall("put","/api/v1/collection/items/"+this.uuid,t,null,{headers:{"Content-Type":void 0}})}delete(){return this.apiCall("delete","/api/v1/collection/items/"+this.uuid)}},n=class extends t{search(t){return this.apiCall("get","/api/v1/collection/items",null,t)}create(t){return this.apiCall("post","/api/v1/collection/items",t,null,{headers:{"Content-Type":void 0}})}get(t){return new r(this.httpClient,t)}},l=class extends t{constructor(t,e){super(t),this.releaseId=e}getTracks(t=null){return this.apiCall("get","/api/v1/discover/releases/"+this.releaseId,null,t)}},h=class extends t{search(t){return this.apiCall("get","/api/v1/discover/releases",null,t)}get(t){return new l(this.httpClient,t)}},o=class extends t{search(t){return this.apiCall("get","/api/v1/discover/artists",null,t)}},c=class extends t{constructor(t){super(t),this.releases=new h(t),this.artists=new o(t)}resources(t){return this.apiCall("get","/api/v1/discover/resources",null,t)}},d=s(978);class u extends HTMLElement{__construct(t=null,e=null){}beforeRender(){}render(){this.innerHTML="inner html"}afterRender(){}connectedCallback(){this.beforeRender(),this.render(),this.afterRender()}static elementName="base-element";static register(){customElements.get(this.elementName)||customElements.define(this.elementName,this)}static instantiate(...t){if(!customElements.get(this.elementName))throw`Register this garbage <${this.elementName}> damn you, you forgot to register it! Call .register() !!`;var e=document.createElement(this.elementName);return e.__construct(...t),e}constructor(){super(),this.$refs={}}}const m=u;class p extends m{static elementName="nav-menu";__construct(t){this.api=t}render(){this.clear(),this.classList.add("app-nav"),this.addGenericNavItem("#home","Home","fa-chevron-right"),this.addGenericNavItem("#search","Search","fa-chevron-right"),this.addGenericNavItem("#discover:artist","Discover","fa-chevron-right"),this.createAndAttach("hr"),this.$refs.playlists=this.createAndAttach("div",{class:"app-nav__playlists"}),this.createAndAttach("hr"),this.$refs.artists=this.createAndAttach("div",{class:"app-nav__artists"}),this.updatePlaylists(),this.updateArtists()}updatePlaylists(){this.api.collection.playlists.list().then((t=>{if(t.data)for(var e of t.data)this.addPlaylistNavItem(e.id,e.title);this.$refs.playlists.append(this.createGenericNavItem("#playlist/create","Create playlist","fa-plus-circle"))}))}updateArtists(){this.api.collection.artists.list().then((t=>{for(var e of t.data)this.addArtistNavItem(e)}))}addArtistNavItem(t){this.$refs.artists.createAndAttach("div",{class:"app-nav__item"},this.create("a",{href:"#search?artist="+t},t))}addPlaylistNavItem(t,e){this.$refs.playlists.createAndAttach("div",{class:"app-nav__item"},[this.create("a",{href:`#playlist:${t}`,class:"ellipsis"},e),this.create("a",{href:`#playlist:${t}/edit`,class:"editing"},this.create("span",{class:"fa fa-pencil"}))])}addGenericNavItem(t,e,s=null){var a=this.createGenericNavItem(t,e,s);return this.append(a),a}createGenericNavItem(t,e,s=null){var a,i;return a=this.createAndAttach("div",{class:"app-nav__item"},i=this.create("a",{href:t})),s&&i.createAndAttach("span",{class:"fa "+s}),i.append(e),a}}p.register();const f=p;class g extends HTMLElement{constructor(){super(),this.state={isPaused:!1,isPlaying:!1,isReproducing:!1,isBuffering:!1,isWaiting:!1,isEnded:!1,volume:100}}appendTo(t){return t.append(this),new Promise((async(t,e)=>{t()}))}get isPaused(){return this.state.isPaused}get isPlaying(){return this.state.isPlaying}get isBuffering(){return this.state.isBuffering}get isReproducing(){return this.state.isReproducing}get isWaiting(){return this.state.isWaiting}get isEnded(){return this.state.isEnded}get volume(){return this.state.volume}get currentTime(){}get currentTimeFormatted(){return g.secondsToStringRepresentation(this.currentTime)}get currentTimePercentage(){var t,e;return t=Math.round(this.currentTime),e=Math.round(this.duration),isNaN(t)||isNaN(e)||0==t||0==e?0:t/e*100}get remainingTime(){return this.duration-this.currentTime}get remainingTimeFormatted(){return g.secondsToStringRepresentation(this.remainingTime)}get remainingTimePercentage(){return 100-this.currentTimePercentage}get duration(){}get durationFormatted(){return g.secondsToStringRepresentation(this.duration)}getTime(t){return Math.round(this.duration/100*t)}getTimeFormatted(t){return g.secondsToStringRepresentation(this.getTime(t))}getPercentage(t){return("string"==typeof t&&t.indexOf(":")>=0?g.stringRepresentationToSeconds(t):parseFloat(t))/this.duration*100}seek(t){}play(t=null){}pause(){}toggle(){this.isPlaying?this.pause():this.play()}sanitizeGetSeconds(t){var e;return e="string"==typeof t&&t.indexOf(":")>=0?g.stringRepresentationToSeconds(t):"string"==typeof t&&t.indexOf("%")>=0?this.getTime(parseInt(t)):"string"==typeof t?parseInt(t):t,isNaN(e)&&(e=0),e}fireEvent(t,e,s=!0){return this.dispatchEvent(new CustomEvent(t,{bubbles:s,detail:e}))}log(t){console.log(t)}static secondsToStringRepresentation(t){return isNaN(t)?"00:00":(t=Math.round(t),n=(i=(i=(s=Math.floor(t/60))-60*(e=Math.floor(s/60)))<10?"0"+i:i)+":"+(r=(r=t-60*s)<10?"0"+r:r),n=(a=e)>0?a+":"+n:n);var e,s,a,i,r,n}static stringRepresentationToSeconds(t){var e,s,a;return!((e=t.match(/[0-9]+/g)).length>3)&&(a=parseInt(e[e.length-1]),s=parseInt(e[e.length-2]||0),3600*parseInt(e[e.length-3]||0)+60*s+a)}}const y=g,v=class{static async loadExternalJs(t,e=null){return new Promise((async function(s,a){var i;(i=document.createElement("script")).async=!0,i.type="text/javascript",i.onload=function(t){s("SCRIPT: loaded")},i.onerror=function(t){a("SCRIPT: failed to load")},i.src=t,(e=e||document.body).appendChild(i)}))}};class b extends y{static sdkLoaded=!1;static sdkLoading=!1;static sdkPromise=null;static defaults={width:640,height:null};constructor(){super(),this.state.currentTime=0,this.state.playerInitialized=!1;var t={embbedId:"youtube-embbed-"+Math.floor(1e4*Math.random()),id:null};this.settings={...b.defaults,...t},this.html={},this.follower=null}connectedCallback(){var t,e,s,a;return this.html.embed=this.createDiv(this.settings.embbedId,this),(t=this.getAttribute("src"))&&(this.src=t),(e=this.getAttribute("video-id"))&&(this.videoId=e),(s=this.getAttribute("width"))&&(this.width=s),(a=this.getAttribute("height"))&&(this.height=a),this.readyToPlayPromise=b.loadSdk().then((()=>this.initializePlayer()))}remove(){this.html.ytPlayer&&this.html.ytPlayer.destroy(),super.remove()}appendTo(t){return t.append(this),this.readyToPlayPromise}set src(t){this.settings.id=b.getIdFromUrl(t)}set videoId(t){this.settings.id=t}set width(t){this.settings.width=parseInt(t),this.updateDimensions()}set height(t){this.settings.height=parseInt(t),this.updateDimensions()}updateDimensions(){if(this.html.ytPlayer){var t=this.settings.width,e=this.settings.height;t="auto"==t||"100%"==t?this.offsetWidth:t,e=null==e?t/1.77:e;var s=this.html.ytPlayer.getIframe();s.width=t,s.height=e}}get currentTime(){return this.state.currentTime}get duration(){return this.html.ytPlayer&&this.html.ytPlayer.getDuration?this.html.ytPlayer.getDuration():0}seek(t){if(!this.state.playerInitialized)return!1;var e=this.sanitizeGetSeconds(t);this.html.ytPlayer.seekTo(e,!0)}play(t=null){if(t&&this.seek(t),!this.state.playerInitialized)return!1;this.html.ytPlayer.playVideo()}pause(){if(!this.state.playerInitialized)return!1;this.html.ytPlayer.pauseVideo()}setVolume(t){this.state.volume=t,this.state.playerInitialized&&this.html.ytPlayer.setVolume(t)}async initializePlayer(){return new Promise((async(t,e)=>{var s=this.settings.width,a=this.settings.height;s="auto"==s?this.offsetWidth:s,a=null==a?s/1.77:a,this.html.ytPlayer=new YT.Player(this.settings.embbedId,{width:s,height:a,videoId:this.settings.id,startSeconds:0,host:"https://www.youtube.com",playerVars:{autoplay:1,controls:0},events:{onReady:e=>{t(this),this.setVolume(this.volume),this.state.playerInitialized=!0},onError:t=>{var s=b.getErrorDescription(t.data);e(s),this.fireEvent("player:error",{errorCode:t.data,errorMessage:s})},onStateChange:this.callBackOnStateChange.bind(this)}})}))}callBackOnStateChange(t){switch(t.data){case-1:this.state.isReproducing=!1,this.state.isPlaying=!1,this.state.isPaused=!1;break;case 0:this.state.isReproducing=!1,this.state.isPlaying=!1,this.state.isPaused=!0,this.state.isWaiting=!1,this.stopFollowing(),this.fireEvent("player:ended");break;case 1:var e=this.state.isWaiting;this.state.isReproducing=!0,this.state.isPlaying=!0,this.state.isPaused=!1,this.state.isBuffering=!1,this.state.isWaiting=!1,this.startFollowing(),e?this.fireEvent("player:playing"):this.fireEvent("player:play");break;case 2:this.state.isReproducing=!1,this.state.isPlaying=!1,this.state.isPaused=!0,this.state.isWaiting=!1,this.fireEvent("player:pause");break;case 3:this.state.isReproducing=!1,this.state.isPlaying=!0,this.state.isPaused=!1,this.state.isBuffering=!0,this.state.isWaiting=!0,this.fireEvent("player:waiting");break;case 5:this.play(0),this.fireEvent("player:play")}}startFollowing(){this.follower=setInterval(this.following.bind(this),1e3)}stopFollowing(){clearInterval(this.follower)}following(){var t=this.html.ytPlayer&&this.html.ytPlayer.getCurrentTime?this.html.ytPlayer.getCurrentTime():0;t!=this.currentTime&&(this.state.currentTime=t,this.fireEvent("player:timeupdate"))}static getErrorDescription(t){switch(t){case"2":return"Error 2: invalid parameters.";case"5":return"Error 5: An error related to the HTML5 player occurred.";case"100":return"Error 100: Video not found.";case"101":case"150":return"Error 101: The video's owner won't allow it on embbed players."}return"Error "+t+": Unknown error"}static getIdFromUrl(t){var e;return(e=t.match(/v=([A-Za-z0-9-_]+)/))||(e=t.match(/\.be\/([A-Za-z0-9-_]+)/))||(e=t.match(/embed\/([A-Za-z0-9-_]+)/))?e[1]:null}static async loadSdk(){return b.sdkLoaded?new Promise((async(t,e)=>{t()})):"undefined"!=typeof YT&&void 0!==YT.Player?(b.sdkLoaded=!0,new Promise((async(t,e)=>{t()}))):b.sdkLoading?b.sdkPromise:b.sdkPromise=new Promise((async(t,e)=>{v.loadExternalJs("https://www.youtube.com/iframe_api").then((async()=>{setTimeout((()=>{b.sdkLoaded=!0,t("YouTube SDK ready")}),500)}),(()=>{e("Error loading SDK")}))}))}createDiv(t,e){var s=document.createElement("div");return s.id=t,e.append(s),s}}const A=b,w=class extends y{constructor(){super(),this.settings={src:null}}connectedCallback(){this.mediaP=this.createMedia(),this.mediaP.src=this.settings.src,this.append(this.mediaP),this.mediaP.addEventListener("play",(t=>{this.state.isPaused=!1,this.state.isPlaying=!0,this.state.isWaiting=!1,this.fireEvent("player:play")})),this.mediaP.addEventListener("pause",(t=>{this.state.isPlaying=!1,this.state.isPaused=!0,this.state.isReproducing=!1,this.fireEvent("player:pause")})),this.mediaP.addEventListener("timeupdate",(t=>{this.state.isReproducing=!0,this.fireEvent("player:timeupdate")})),this.mediaP.addEventListener("ended",(t=>{this.state.isPlaying=!1,this.state.isPaused=!0,this.state.isReproducing=!1,this.state.isWaiting=!1,this.fireEvent("player:ended")})),this.mediaP.addEventListener("error",(t=>{this.fireEvent("player:error",{errorCode:0,errorMessage:"Resource could not be loaded"})})),this.mediaP.addEventListener("loadstart",(t=>{this.state.isBuffering=!0})),this.mediaP.addEventListener("progress",(t=>{this.state.isBuffering=!0})),this.mediaP.addEventListener("waiting",(t=>{this.state.isReproducing=!1,this.state.isBuffering=!0,this.state.isWaiting=!0,this.fireEvent("player:waiting")})),this.mediaP.addEventListener("playing",(t=>{this.state.isWaiting=!1,this.fireEvent("player:playing")})),this.mediaP.addEventListener("canplaythrough",(t=>{this.state.isBuffering=!1,this.state.isWaiting=!1})),this.mediaP.addEventListener("canplay",(t=>{this.state.isBuffering=!1,this.state.isWaiting=!1})),this.mediaP.addEventListener("suspend",(t=>{this.state.isBuffering=!1})),this.mediaP.addEventListener("abort",(t=>{this.state.isBuffering=!1})),this.mediaP.addEventListener("stalled",(t=>{this.state.isBuffering=!1}))}set src(t){this.settings.src=t}get currentTime(){return this.mediaP.currentTime}get duration(){return this.mediaP.duration}play(t=this.currentTime){return this.seek(t),this.mediaP.play()}pause(){this.mediaP.pause()}seek(t){var e=this.sanitizeGetSeconds(t);this.mediaP.currentTime=e}setVolume(t){this.state.volume=t,t>1&&(t/=100),this.mediaP.volume=t}createMedia(){return new Audio}};(class extends w{createMedia(){return document.createElement("video")}}).prototype.defaults={wrapperId:null},customElements.define("player-youtube",A),customElements.define("player-audio",w);class P extends m{static elementName="reproduction-controls";__construct(t){this.api=t,this.volume=15}render(){this.$refs.timer=this.createAndAttach("span",{class:"reproduction-controls__timer"}),this.$refs.playButton=this.createAndAttach("button",{class:"button-play"},this.create("span",{class:"fa fa-play"})),this.$refs.volumeControl=this.createAndAttach("input",{type:"range",min:0,max:100,step:1,class:"reproduction-controls__volume"}),this.$refs.progress=this.createAndAttach("progress",{max:100,class:"reproduction-controls__progress"}),this.$refs.playerFrame=this.createAndAttach("div",{class:"player-frame intangible"}),this.$refs.volumeControl.value=this.volume,this.$refs.progress.addEventListener("click",this.seek.bind(this)),this.$refs.playButton.addEventListener("click",this.toggle.bind(this)),this.$refs.volumeControl.addEventListener("change",this.dialVolume.bind(this)),this.addEventListener("player:timeupdate",this.onTimeUpdate.bind(this)),this.addEventListener("player:ended",(()=>{console.log("Reproduction: ended")})),this.addEventListener("player:pause",(()=>{console.log("Reproduction: paused")}))}playResource(t){console.log("Reproduction: booting player"),this.player&&this.destroyPlayer(this.player),window.player=this.player=this.createPlayer(t),this.attachPlayer(this.player)}attachPlayer(t){t.appendTo(this.$refs.playerFrame).then((()=>{t.setVolume(15),t.play(),t.setVolume(this.volume),console.log("Reproduction: reproducing audio")}))}destroyPlayer(t){t.pause(),t.remove()}createPlayer(t){switch(t.vendor){case"youtube":return this.createPlayerYouTube(t);case"slider_kz":return this.createPlayerSliderKz(t)}}createPlayerYouTube(t){var e=t.id.split("@")[0],s=document.createElement("player-youtube");return s.videoId=e,s.width=390,s}createPlayerSliderKz(t){var e=document.createElement("player-audio");return e.src=t.source,e}toggle(){this.player&&this.player.toggle()}onTimeUpdate(){this.$refs.timer.innerHTML=this.player.currentTimeFormatted,this.$refs.progress.value=this.player.currentTimePercentage}dialVolume(t){this.player&&(this.volume=t.target.value,this.player.setVolume(this.volume))}seek(t){var e,s,a;this.player&&(e=t.clientX-this.$refs.progress.offsetLeft,s=this.$refs.progress.offsetWidth,a=Math.ceil(e/s*100)+"%",this.player.seek(a))}}P.register();const T=P,S=class extends m{static elementName="view-welcome";__construct(t,e){this.request=t,this.api=e}afterRender(){this.classList.add("view")}};class E extends S{static elementName="view-welcome";render(){var t=document.createElement("p");t.innerHTML="Welcome back",this.append(t)}}E.register();const q=E;class $ extends m{static elementName="playlist-item";__construct(t={}){this.item=t,this.item.artist?this.item.artist=Array.isArray(this.item.artist)?this.item.artist:[this.item.artist]:this.item.artist=[],this.item.soundtrack?this.item.soundtrack=Array.isArray(this.item.soundtrack)?this.item.soundtrack:[this.item.soundtrack]:this.item.soundtrack=[]}render(){for(var t of(this.innerHTML="",this.classList.add("playlist-item"),this.$refs.body=this.createAndAttach("div",{class:"playlist-item__body"}),this.$refs.action=this.createAndAttach("div",{class:"playlist-item__actions"}),this.item.title&&(this.$refs.title=this.$refs.body.createAndAttach("span",{class:"playlist-item__title"},[this.item.title])),this.item.artist))this.$refs.body.createAndAttach("span",{class:"playlist-item__artist playlist-item__info"},[this.create("a",{href:`#search?artist=${t}`},t)," ",this.create("a",{href:`#discover:releases?artist=${t}`},[this.createAndAttach("span",{class:"fa fa-search"})])]);for(var e of this.item.soundtrack)this.$refs.body.createAndAttach("span",{class:"playlist-item__soundtrack playlist-item__info"},[this.create("a",{href:`#search?soundtrack=${e}`},e)]);this.item.uuid&&(this.$refs.editButton=this.$refs.action.createAndAttach("a",{href:`#item:${this.item.uuid}/edit`,title:"Edit"},this.createAndAttach("span",{class:"fa fa-pencil"}))),this.$refs.title.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("item-selected",{bubbles:!0,detail:{item:this.item}}))}))}}$.register();const x=$;var L=s(781),I=s.n(L),R=s(923),k=s.n(R);class C extends m{static elementName="view-search-header";__construct(t,e,s){this.request=t,this.title=e,this.fields=s}render(){var t;for(var e of(this.classList.add("search-header"),this.createAndAttach("h1",null,this.title),this.$refs.form=this.createAndAttach("form",{class:"search-header__form input-group"}),this.fields))e.value=this.request.queryParams.get(e.name)||"",t=this.$refs.form.createAndAttach("input",e),e.value.length&&(t.focus(),t.selectionStart=t.selectionEnd=t.value.length);this.$refs.form.createAndAttach("button",null,[this.create("span",{class:"fa fa-search"})]),this.$refs.form.addEventListener("submit",(t=>{t.preventDefault(),window.location.href=this.request.path+"?"+k().objectToSearchParams(I().toObject(this.$refs.form)).toString()}))}}C.register();const N=C;class _ extends m{static elementName="view-pagination";__construct(t,e,s){this.api=t,this.request=e,this.response=s}render(){var t;this.classList.add("button-group"),this.classList.add("view-nav"),this.response.meta&&this.response.meta.pages&&(this.response.meta.pages>1&&((t=this.request.queryParams.without("page")).set("page",1),this.createAndAttach("a",{href:this.request.path+"?"+t.toString(),class:"btn view-nav-first"},["first"])),this.response.meta.page>1&&((t=this.request.queryParams.without("page")).set("page",this.response.meta.page-1),this.createAndAttach("a",{href:this.request.path+"?"+t.toString(),class:"btn"},["prev"])),this.response.meta.pages>this.response.meta.page&&((t=this.request.queryParams.without("page")).set("page",this.response.meta.page+1),this.createAndAttach("a",{href:this.request.path+"?"+t.toString(),class:"btn"},["next"])),this.response.meta.pages>this.response.meta.page&&((t=this.request.queryParams.without("page")).set("page",this.response.meta.pages),this.createAndAttach("a",{href:this.request.path+"?"+t.toString(),class:"btn view-nav-last"},["last"])))}}_.register();const F=_;class M{static enableBottomReached(t){t.addEventListener("scroll",M.onScroll.bind(t))}static onScroll(t){this.scrollTop+this.offsetHeight>=this.scrollHeight&&this.dispatchEvent(new CustomEvent("scroll-bottom-reached",{bubbles:!1}))}}const H=M,O=class{constructor(t,e){this.noMore=!1,this.initialBatch=t,this.api=e}async fetchMore(t){return this.noMore?new Promise(((t,e)=>t({data:[]}))):(this.progress(),this.request(t).then((t=>(console.log(t),t.data&&0!=t.data.length||(this.noMore=!0),t))))}progress(){}async request(t){}},B=class extends O{constructor(t,e,s){super(t,e),this.queryParams=s}async request(t){return this.api.collection.playlistItems.search(this.queryParams)}progress(){var t=parseInt(this.queryParams.get("page")||1)+1;this.queryParams.set("page",t)}},U=class extends B{constructor(t,e,s,a){super(t,e,s),this.playlistId=a}request(t){return this.api.collection.playlists.get(this.playlistId).getItems(this.queryParams)}};class D extends S{static elementName="view-playlist";async render(){this.fetch().then((t=>{this.renderHeader(t),this.renderItems(t),this.renderNavigation(t),this.renderNewItem()})),H.enableBottomReached(this),this.addEventListener("scroll-bottom-reached",this.bottomReached.bind(this)),this.addEventListener("item-selected",this.onItemSelected.bind(this))}bottomReached(t){console.log("Bottom of the page reached")}fetch(){return this.request.queryParams.without("page").isEmpty()?this.api.collection.playlists.get(this.request.attributes.playlistId).getItems(this.request.queryParams):this.api.collection.playlistItems.search(this.request.queryParams.withAdded("playlist",this.request.attributes.playlistId))}renderHeader(t){return this.append(N.instantiate(this.request,t.playlist?t.playlist.title:this.request.attributes.playlistId,[{type:"search",name:"title",placeholder:"Title",class:"main"},{type:"search",name:"artist",placeholder:"Artist"},{type:"search",name:"genre",placeholder:"Genre"}]))}async renderItems(t){if(t.data)for(var e of t.data)this.attach(x.instantiate(e))}renderNavigation(t){this.append(F.instantiate(this.api,this.request,t))}renderNewItem(){this.createAndAttach("a",{href:"#playlist:"+this.request.attributes.playlistId+"/create-item"},"New Item")}onItemSelected(t){var e=[];for(var s of this.querySelectorAll(x.elementName))e.push(s.item);for(var a in e)if(e[a]==t.detail.item){e=e.slice(a);break}t.detail.context=new U(e,this.api,this.request.queryParams,this.request.attributes.playlistId)}}D.register();const j=D;class V extends m{static elementName="messages-container";render(){this.classList.add("messages"),this.successes=this.createAndAttach("ul",{class:"successes hidden"}),this.warnings=this.createAndAttach("ul",{class:"warnings hidden"}),this.errors=this.createAndAttach("ul",{class:"errors hidden"})}messages(t){if(this.successes.clear().classList.add("hidden"),this.warnings.clear().classList.add("hidden"),this.errors.clear().classList.add("hidden"),t.successes)for(var e of(this.successes.classList.remove("hidden"),t.successes))this.successes.createAndAttach("li",null,e.title);if(t.errors)for(var e of(this.errors.classList.remove("hidden"),t.errors))this.errors.createAndAttach("li",null,e.title);if(t.warnings)for(var e of(this.warnings.classList.remove("hidden"),t.warnings))this.warnings.createAndAttach("li",null,e.title)}}V.register();const z=V;class W extends S{static elementName="view-edit-playlist";async render(){this.fetch().then((t=>{this.renderHeader(t),this.renderForm(t)}))}fetch(){return this.api.collection.playlists.get(this.request.attributes.playlistId).read()}renderHeader(t){this.createAndAttach("h1",null,"Editing playlist"),this.$refs.messages=this.attach(z.instantiate())}renderForm(t){var e=this.createAndAttach("form",{class:"horizontal",method:"post",enctype:"multipart/form-data"},[this.create("label",{class:"form-group"},[this.create("span",{class:"label col-sm-2"},"Title"),this.create("input",{type:"text",class:"col-sm-10",name:"title",value:t.data.title})]),this.create("label",{class:"form-group"},[this.create("span",{class:"label col-sm-2"},"Description"),this.create("textarea",{type:"text",class:"col-sm-10",name:"description"},t.data.description||"")]),this.create("div",{class:"form-group"},[this.create("input",{type:"submit",value:"Save",class:"col-12 btn-main"})])]);e.addEventListener("submit",(t=>{t.preventDefault(),this.api.collection.playlists.get(this.request.attributes.playlistId).update(e).then(this.formSubmitted.bind(this),this.formSubmitted.bind(this))}))}formSubmitted(t){this.$refs.messages.messages(t),t.successes.length&&this.dispatchEvent(new CustomEvent("playlist-updated",{bubbles:!0}))}}W.register();const G=W;class Q extends S{static elementName="view-add-playlist";async render(){this.renderHeader(),this.renderForm()}renderHeader(){this.createAndAttach("h1",null,"Adding new playlist"),this.$refs.messages=this.attach(z.instantiate())}renderForm(){var t=this.createAndAttach("form",{class:"horizontal",method:"post",enctype:"multipart/form-data"},[this.create("label",{class:"form-group"},[this.create("span",{class:"label col-sm-2"},"Title"),this.create("input",{type:"text",class:"col-sm-10",name:"title"})]),this.create("label",{class:"form-group"},[this.create("span",{class:"label col-sm-2"},"Description"),this.create("textarea",{type:"text",class:"col-sm-10",name:"description"})]),this.create("div",{class:"form-group"},[this.create("input",{type:"submit",value:"Save",class:"col-12 btn-main"})])]);t.addEventListener("submit",(e=>{e.preventDefault(),this.api.collection.playlists.create(t).then(this.formSubmitted.bind(this),this.formSubmitted.bind(this))}))}formSubmitted(t){this.$refs.messages.messages(t),t.successes.length&&this.dispatchEvent(new CustomEvent("playlist-updated",{bubbles:!0}))}}Q.register();const J=Q;class Y extends m{static elementName="text-field";__construct(t,e,s,a=""){this.name=t,this.label=e,this.value=s,this.placeholder=a}render(){var t=Math.floor(1e4*Math.random());this.classList.add("form-group"),this.createAndAttach("label",{class:"label col-sm-2",for:t},this.label),this.$refs.input=this.createAndAttach("input",{type:"text",class:"col-sm-10",id:t,name:this.name,value:this.value,placeholder:this.placeholder})}setValue(t){this.$refs.input.value=t}}Y.register();const K=Y;class Z extends m{static elementName="multiple-text-field";__construct(t,e,s,a="",i="Add +"){this.name=t,this.label=e,this.value=s,this.placeholder=a,this.addButton=i}render(){this.classList.add("form-group"),this.createAndAttach("span",{class:"label col-sm-2"},this.label),this.createAndAttach("div",{class:"col-sm-10"},[this.$refs.body=this.create("div",{class:"grid"}),this.$refs.plusButton=this.create("a",{},this.addButton)]),this.$refs.plusButton.addEventListener("click",this.addBlank.bind(this)),this.setValue(this.value)}setValue(t){this.$refs.body.clear(),this.addValues(t)}addValues(t){for(var e of t=Array.isArray(t)?t:[t])this.add(e)}add(t=""){this.$refs.body.createAndAttach("input",{type:"text",placeholder:this.placeholder,class:"col-sm-12",name:this.name,value:t})}addBlank(){this.add("")}}Z.register();const X=Z;class tt extends m{static elementName="form-element";render(){this.$refs.form=this.createAndAttach("form",{class:"horizontal",method:"post",enctype:"multipart/form-data"})}getForm(){return this.$refs.form}addHidden(t,e){return this.$refs[t]=this.$refs.form.createAndAttach("input",{type:"hidden",name:t,value:e})}addTextField(t,e,s,a=""){return this.$refs[t]=this.$refs.form.attach(K.instantiate(t,e,s,a))}addMultiTextField(t,e,s,a="",i="Add +"){return this.$refs[t]=this.$refs.form.attach(X.instantiate(t,e,s,a,i))}addSubmitButton(t,e){return this.$refs[t]=this.$refs.form.createAndAttach("div",{class:"form-group"},[this.create("input",{type:"submit",name:t,value:e,class:"col-12 btn-main"})])}}tt.register();const et=tt;class st extends S{static elementName="view-edit-item";async render(){this.fetch().then((t=>{this.renderHeader(t),this.renderForm(t)}))}fetch(){return this.api.collection.playlistItems.get(this.request.attributes.itemUuid).read()}renderHeader(t){this.createAndAttach("h1",null,"Editing item"),this.$refs.messages=this.attach(z.instantiate())}renderForm(t){var e=t.data.title||"",s=this.getArray(t.data,"artist"),a=this.getArray(t.data,"featuring"),i=t.data.cover||"",r=t.data.album||"",n=this.getArray(t.data,"soundtrack"),l=this.getArray(t.data,"genre");this.$refs.form=this.attach(et.instantiate()),this.$refs.form.addTextField("title","Title",e),this.$refs.form.addTextField("album","Album",r),this.$refs.form.addMultiTextField("artist[]","Artist",s,"Artist","Add artist"),this.$refs.form.addMultiTextField("featuring[]","Artist",a,"Featuring","Add featured artist"),this.$refs.form.addTextField("cover","Cover",i),this.$refs.form.addMultiTextField("soundtrack[]","Soundtrack",n,"Soundtrack","Add soundtrack"),this.$refs.form.addMultiTextField("genre[]","Genre",l,"Genre","Add genre"),this.$refs.form.addSubmitButton("save","Save"),this.$refs.form.addEventListener("submit",(t=>{t.preventDefault(),this.api.collection.playlistItems.get(this.request.attributes.itemUuid).update(this.$refs.form.getForm()).then(this.formSubmitted.bind(this),this.formSubmitted.bind(this))}))}getArray(t,e){return t[e]?Array.isArray(t[e])?t[e]:[t[e]]:[""]}formSubmitted(t){this.$refs.messages.messages(t),t.successes.length&&this.dispatchEvent(new CustomEvent("item-updated",{bubbles:!0}))}}st.register();const at=st;class it extends S{static elementName="view-add-item";render(){this.renderHeader(),this.renderForm()}renderHeader(){this.createAndAttach("h1",null,"Adding item"),this.$refs.messages=this.attach(z.instantiate())}renderForm(){this.$refs.form=this.attach(et.instantiate()),this.$refs.form.addTextField("title","Title",""),this.$refs.form.addTextField("album","Album",""),this.$refs.form.addMultiTextField("artist[]","Artist",[""],"Artist","Add artist"),this.$refs.form.addMultiTextField("featuring[]","Artist",[""],"Featuring","Add featured artist"),this.$refs.form.addTextField("cover","Cover",""),this.$refs.form.addMultiTextField("soundtrack[]","Soundtrack",[""],"Soundtrack","Add soundtrack"),this.$refs.form.addMultiTextField("genre[]","Genre",[""],"Genre","Add genre"),this.$refs.form.addHidden("playlist",this.request.attributes.playlistId),this.$refs.form.addSubmitButton("save","Save"),this.$refs.form.addEventListener("submit",(t=>{t.preventDefault(),this.api.collection.playlistItems.create(this.$refs.form.getForm()).then(this.formSubmitted.bind(this),this.formSubmitted.bind(this))}))}formSubmitted(t){this.$refs.messages.messages(t),t.successes.length&&this.dispatchEvent(new CustomEvent("item-updated",{bubbles:!0}))}}it.register();const rt=it;class nt extends S{static elementName="view-discography";async render(){this.api.discover.releases.search(this.request.queryParams).then((t=>{this.renderHeader(t),this.renderReleases(t),this.renderNavigation(t)}))}renderHeader(t){var e=N.instantiate(this.request,"Discover albums",[{type:"search",name:"artist",placeholder:"artist",class:"main"}]);this.append(e)}async renderReleases(t){var e=this.createAndAttach("div",{class:"grid releases"});for(var s of t.data)e.createAndAttach("a",{href:`#discover:release:${s.id}`,class:"col-6 col-sm-4 col-md-3 col-lg-2"},[this.create("span",{class:"card"},[s.thumbnail?this.create("img",{src:s.thumbnail}):null,this.create("h4",null,[s.title])])])}renderNavigation(t){this.append(F.instantiate(this.api,this.request,t))}}nt.register();const lt=nt,ht=class extends O{constructor(t,e){super(t,e),this.noMore=!0}async fetchMore(t){return new Promise(((t,e)=>t({data:[]})))}};class ot extends S{static elementName="view-release";async render(){this.api.discover.releases.get(this.request.attributes.releaseId).getTracks().then((t=>{this.renderHeader(t),this.renderTracks(t)})),this.addEventListener("item-selected",this.onItemSelected.bind(this))}renderHeader(t){this.createAndAttach("h1",null,[t.data.artist," ",t.data.title])}async renderTracks(t){for(var e of t.data.tracks)this.append(x.instantiate({title:e,artist:t.data.artist}))}onItemSelected(t){var e=[];for(var s of this.querySelectorAll(x.elementName))e.push(s.item);for(var a in e)if(e[a]==t.detail.item){e=e.slice(a);break}t.detail.context=new ht(e,this.api)}}ot.register();const ct=ot;class dt extends j{static elementName="view-search";fetch(){return this.request.queryParams.isEmpty()?new Promise(((t,e)=>t({}))):this.api.collection.playlistItems.search(this.request.queryParams)}renderHeader(t){this.append(N.instantiate(this.request,"Search",[{type:"search",name:"title",placeholder:"Title",class:"main"},{type:"search",name:"artist",placeholder:"Artist"},{type:"search",name:"genre",placeholder:"Genre"}]))}onItemSelected(t){var e=[];for(var s of this.querySelectorAll(x.elementName))e.push(s.item);for(var a in e)if(e[a]==t.detail.item){e=e.slice(a);break}t.detail.context=new B(e,this.api,this.request.queryParams)}}dt.register();const ut=dt;class mt extends S{static elementName="view-discover";async render(){this.fetch().then((t=>{this.renderHeader(t),this.renderArtists(t)}))}fetch(){return this.request.queryParams.isEmpty()?new Promise(((t,e)=>t({data:[]}))):this.api.discover.artists.search(this.request.queryParams)}renderHeader(t){var e=N.instantiate(this.request,"Discover artist",[{type:"search",name:"name",placeholder:"name",class:"main"}]);this.append(e)}async renderArtists(t){var e=this.createAndAttach("div",{class:"grid artists"});for(var s of t.data)e.createAndAttach("a",{href:`#discover:releases?artist=${s.name}`,class:"col-6 col-sm-4 col-md-3 col-lg-2"},[this.create("span",{class:"card"},[s.thumbnail?this.create("img",{src:s.thumbnail}):null,this.create("h4",null,[s.name])])])}}mt.register();const pt=mt;class ft extends S{static elementName="not-found";async render(){this.createAndAttach("h1",null,"Not found"),this.createAndAttach("p",null,`Nothing found related to ${this.request.path}`)}}ft.register();const gt=ft;var yt=s(766),vt=s.n(yt);class bt{constructor(t,e){this.path=t,this.queryParams=e,this.attributes={}}static createFromGlobals(){if(!location.hash)return new bt("",new URLSearchParams(""));var t=new URL(location.hash.replace("#","/"),"https://"+location.hostname);return new bt(t.pathname.replace(/^\//,"#"),new URLSearchParams(t.search))}}const At=bt;class wt extends m{static elementName="the-app";__construct(t){this.api=t,this.router=this.setUpRouter(t),this.showRunner=new class{constructor(t,e){this.app=t,this.api=e,this.queue=new class{constructor(t=[]){this.items=t,this.context=null}enqueue(t){Array.isArray(t)?this.enqueueMultiple(t):this.enqueueSingle(t)}dequeue(){var t=this.items[0]||null;return this.items=this.items.slice(1),this.items.length<=1&&this.fetchMore(),t}get length(){return this.items.length}get theOneInFront(){return this.items[0]?this.items[0]:(console.log("Queue: end reached"),null)}setContext(t){this.context=t,console.log("Queue: context set"),this.clear(),this.enqueue(t.initialBatch)}async fetchMore(){return console.log("Queue: Searching for more content"),this.context.fetchMore(this).then((t=>(t.data&&t.data.length?this.enqueue(t.data):console.log("Queue: nothig more to add to the queue"),t)))}clear(){console.log("Queue: emptied"),this.items=[]}enqueueMultiple(t){this.items=[...this.items,...t],console.log("Queue: multiple items added")}enqueueSingle(t){this.items.push(t),console.log("Queue: single item added")}},this.app.addEventListener("item-selected",this.onItemSelected.bind(this)),this.app.addEventListener("player:ended",this.onPlayerEnded.bind(this))}onItemSelected(t){console.log("Show runner: New item selected"),this.findResourcesForMusicalItem(t.detail.item).then((e=>{e.data[0]?(t.detail.context&&(this.queue.setContext(t.detail.context),this.queue.length<=1&&this.queue.fetchMore()),this.app.$refs.controls.playResource(e.data[0])):alert("Show runner: Nothing found to play")}))}onPlayerEnded(t){this.queue.dequeue(),this.queue.theOneInFront&&(console.log("Show runner: moving the queue"),this.findResourcesForMusicalItem(this.queue.theOneInFront).then((t=>{t.data&&this.app.$refs.controls.playResource(t.data[0])})))}async findResourcesForMusicalItem(t){console.log("Show runner: searching for source to play");var e={};return t.title&&(e.title=t.title),t.soundtrack&&t.soundtrack.length?e.soundtrack=t.soundtrack:t.artist&&t.artist.length&&(e.artist=t.artist),this.api.discover.resources(e)}}(this,t)}render(){this.$refs.middle=this.createAndAttach("div",{class:"app-middle"},[this.$refs.navMenu=f.instantiate(this.api),this.$refs.stage=this.create("div",{class:"app-stage",id:"stage"})]),this.$refs.footer=this.createAndAttach("div",{class:"app-footer"},[this.$refs.controls=T.instantiate(this.api)]),this.router.setStage(this.$refs.stage),this.router.listenToChanges(),this.addEventListener("playlist-updated",(()=>{this.$refs.navMenu.render()})),this.classList.add("app")}setUpRouter(t){var e=new class{constructor(t=null){this.stage=t,this.routes=[]}setStage(t){this.stage=t}listenToChanges(){window.addEventListener("hashchange",this.hashChanged.bind(this)),this.hashChanged()}hashChanged(t=null){var e,s=At.createFromGlobals(),a=this.getMatchingRoute(s);a?(this.clearStage(),e=this.call(a,s),this.stageIt(e)):this.notFoundCallback&&(this.clearStage(),e=this.notFoundCallback(a,s),this.stageIt(e))}clearStage(){this.stage.querySelectorAll(":scope > *").forEach((t=>{t.remove()}))}stageIt(t){this.stage.append(t)}call(t,e){return t.callIt(e)}getMatchingRoute(t){for(var e of this.routes)if(e.doesItMatcheRequest(t))return e;return null}addRouter(t,e){return this.routes.push(new class{constructor(t,e){this.patterns=Array.isArray(t)?t:[t],this.callback=e}callIt(t){var e,s=this.getMatchingPattern(t.path).exec(t.path).groups;return t.attributes=s||{},"string"==typeof this.callback?e=document.createElement(this.callback):vt().isA(this.callback,m)?e=this.callback.instantiate.apply(this.callback,s??[]):"function"==typeof this.callback&&(e=this.callback.apply(this,[t])),e}doesItMatcheRequest(t){return!!this.getMatchingPattern(t.path)}getMatchingPattern(t){for(var e of this.patterns)if(t.match(e))return e;return null}}(t,e)),this}};return e.addRouter([/^$/,/home$/],(function(e){return q.instantiate(e,t)})).addRouter(/playlist:(?<playlistId>[\w\d\-]+)$/,(function(e){return j.instantiate(e,t)})).addRouter(/playlist:(?<playlistId>[\w\d\-]+)\/edit/,(function(e){return G.instantiate(e,t)})).addRouter(/search/,(function(e){return ut.instantiate(e,t)})).addRouter(/discover:artist/,(function(e){return pt.instantiate(e,t)})).addRouter(/discover:releases$/,(function(e){return lt.instantiate(e,t)})).addRouter(/discover:release:(?<releaseId>.+)/,(function(e){return ct.instantiate(e,t)})).addRouter(/playlist\/create/,(function(e){return J.instantiate(e,t)})).addRouter(/item:(?<itemUuid>[\w\d\-]+)\/edit/,(function(e){return at.instantiate(e,t)})).addRouter(/playlist:(?<playlistId>[\w\d\-]+)\/create-item/,(function(e){return rt.instantiate(e,t)})).notFoundCallback=function(e,s){return gt.instantiate(s,t)},e}}wt.register();const Pt=wt;class Tt{constructor(t,e=null,s=[]){this.elementName=t,this.attributes=e,this.children=Array.isArray(s)?s:[s]}create(){var t=document.createElement(this.elementName);for(var e in this.attributes)t.setAttribute(e,this.attributes[e]);for(var s of this.children)null!=s&&("string"==typeof s?s=document.createTextNode(s):"object"==typeof s&&s.elementName&&(s=Tt.createFromObject(s)),t.append(s));return t}static createFromObject(t){var{elementName:e,attributes:s,children:a}=t;return new Tt(e,s,a).create()}}const St=Tt;HTMLElement.prototype.attach=function(t){return this.append(t),t},HTMLElement.prototype.create=function(t,e=null,s=[]){return new St(t,e,s).create()},HTMLElement.prototype.createAndAttach=function(t,e=null,s=[]){return this.attach(this.create(t,e,s))},HTMLElement.prototype.clear=function(){var t=Array.from(this.children);for(var e of t)e.remove();return this},URLSearchParams.prototype.without=function(t){var e=new URLSearchParams(this.toString());return e.delete(t),e},URLSearchParams.prototype.withAdded=function(t,e){var s=new URLSearchParams(this.toString());return s.append(t,e),s},URLSearchParams.prototype.isEmpty=function(){return 0==this.toString().length};const Et=new class{constructor(t){var s=new d({baseHref:t,headers:{"Content-Type":"application/json"}});this.collection=new class{constructor(t){this.artists=new e(t),this.playlists=new i(t),this.playlistItems=new n(t)}}(s),this.discover=new c(s)}}("http://player-backend.lndo.site:8000");window.app=Pt.instantiate(Et),window.api=Et,document.addEventListener("DOMContentLoaded",(()=>{document.body.append(window.app)}))})()})();